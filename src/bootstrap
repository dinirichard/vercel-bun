#! /bin/sh
export BUN_INSTALL_CACHE_DIR=/tmp/bun/cache
# Ensure bootstrap file is in the expected location
if [ ! -f /var/task/bootstrap ]; then
  echo "Bootstrap not in expected location, attempting to copy"
  cp "$0" /var/task/bootstrap
  chmod +x /var/task/bootstrap
fi
# Use Bun binary to execute the runtime
exec /opt/bun --cwd $LAMBDA_TASK_ROOT /var/task/runtime.ts